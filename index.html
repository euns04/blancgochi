<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ë¸”ë‘ê³ ì¹˜</title>

<style>
  .speech{
  position:absolute;
  bottom: 20px;
  left: 50%;
  transform:translateX(-50%) translateY(5px);
  background:white;
  padding:6px 10px;
  border-radius:12px;
  font-size:14px;
  box-shadow:0 2px 8px rgba(0,0,0,0.15);
  opacity:0;
  transform:translateY(-5px);
  transition:all 200ms ease;
  pointer-events:none;
}

.speech.show{
  opacity:1;
  transform:translateY(0);
}

.pet{
  position:relative;   /* ì´ ì¤„ ê¼­ ìˆì–´ì•¼ í•¨ */
}



body{
  font-family: system-ui;
  max-width: 420px;
  margin: 24px auto;
  padding: 0 16px;
  background: radial-gradient(circle at 20% 10%, #ffffff 0%, #f6f6f8 55%, #ececf2 100%);
}

.card{
  border-radius: 26px;
  padding: 18px;

  /* íŒŒìŠ¤í…” í•‘í¬ í™”ë©´ */
  background: linear-gradient(180deg, #ffeef7 0%, #ffd7ea 100%);

  /* ê¸°ê¸°ì²˜ëŸ¼ ë‘êº¼ìš´ ë² ì ¤ */
  border: 4px solid rgba(255, 255, 255, 0.9);

  /* ì…ì²´ê° */
  box-shadow:
    0 14px 30px rgba(0,0,0,0.12),
    0 4px 10px rgba(0,0,0,0.06),
    inset 0 3px 8px rgba(255,255,255,0.75),
    inset 0 -10px 18px rgba(0,0,0,0.06);
}

.pet {
  width: 100%;
  border-radius: 16px;
  background: #f3f3f3;
  aspect-ratio: 1 / 1;
  overflow: hidden;
}

.pet img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
  transition: opacity 200ms ease;
}
.fade-out{ opacity:0; }

.fade-out{
  opacity: 0;
}

.row{
  display:flex;
  justify-content:space-between;
  gap:8px;
  margin-top:12px;
  flex-wrap:nowrap;
  font-size:13px;

  background: rgba(255,255,255,0.55);
  border: 1px solid rgba(255,255,255,0.8);
  padding: 10px 12px;
  border-radius: 16px;

  box-shadow:
    inset 0 2px 6px rgba(255,255,255,0.7),
    0 6px 14px rgba(0,0,0,0.06);
}

h1 { text-align:center; }

.actions{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:10px;
  margin-top:14px;
}

.actions button{
  width: 100%;
  padding: 12px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.7);
  font-size: 14px;

  background: linear-gradient(180deg, #ffffff 0%, #f2f2f6 100%);
  aspect-ratio: 1 / 1;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;

  box-shadow:
    0 10px 18px rgba(0,0,0,0.10),
    inset 0 2px 6px rgba(255,255,255,0.9),
    inset 0 -6px 10px rgba(0,0,0,0.06);

  transform: translateY(0);
  transition: transform 80ms ease, box-shadow 80ms ease;
}

.actions button:active{
  transform: translateY(2px);
  box-shadow:
    0 6px 12px rgba(0,0,0,0.10),
    inset 0 2px 6px rgba(255,255,255,0.9),
    inset 0 -2px 6px rgba(0,0,0,0.06);
}

.actions button:disabled{
  opacity: 0.55;
  filter: grayscale(0.2);
}
</style>
</head>

<body>
<h1>&hearts;ë¸”ë‘ê³ ì¹˜&hearts;</h1>

<div class="card">

  <div class="pet">
  <img id="petImg" />
  <div id="speech" class="speech">ëƒ ëƒ </div>
  </div>

  <div class="row">
    <div>ë°°ê³ í””: <b id="hungerText">50</b>/100</div>
    <div>í–‰ë³µ: <b id="happyText">50</b>/100</div>
    <div>ì²­ê²°: <b id="cleanText">60</b>/100</div>
    <div>ì—ë„ˆì§€: <b id="energyText">60</b>/100</div>
  </div>

  <div class="actions">
    <button id="feedBtn">ğŸ–<br>ë°¥</button>
    <button id="playBtn">ğŸ¾<br>ë†€ê¸°</button>
    <button id="bathBtn">ğŸ›<br>ëª©ìš•</button>
    <button id="sleepBtn">ğŸ˜´<br>ì¬ìš°ê¸°</button>
  </div>

</div>

<script>
  // ìˆ«ì í´ìˆ˜ë¡ ì¢‹ì€ ìƒíƒœ(ë°°ê³ í””=ë°°ë¶€ë¦„)
  let hunger = Number(localStorage.getItem("hunger")) || 50;
  let happiness = Number(localStorage.getItem("happiness")) || 50;
  let cleanliness = Number(localStorage.getItem("cleanliness")) || 60;
  let energy = Number(localStorage.getItem("energy")) || 60;

  const hungerText = document.getElementById("hungerText");
  const happyText = document.getElementById("happyText");
  const cleanText = document.getElementById("cleanText");
  const energyText = document.getElementById("energyText");

  const petImg = document.getElementById("petImg");

  const feedBtn = document.getElementById("feedBtn");
  const playBtn = document.getElementById("playBtn");
  const bathBtn = document.getElementById("bathBtn");
  const sleepBtn = document.getElementById("sleepBtn");

  function clamp(v, min, max) { return Math.max(min, Math.min(max, v)); }

  function save() {
    localStorage.setItem("hunger", hunger);
    localStorage.setItem("happiness", happiness);
    localStorage.setItem("cleanliness", cleanliness);
    localStorage.setItem("energy", energy);
  }

  // âœ… ê¸°ë³¸(ì ‘ì†í•  ë•Œë§ˆë‹¤ ëœë¤ 1ì¥)
  const DEFAULTS = ["dog_default1.jpg", "dog_default2.jpg", "dog_default3.jpg"];
  let currentDefault = DEFAULTS[Math.floor(Math.random() * DEFAULTS.length)];

  // âœ… hungry ìƒíƒœ ì´ë¯¸ì§€
  const HUNGRY_IMG = "dog_hungry.jpg";

  // âœ… ì•¡ì…˜(ì ê¹ í–‰ë™ì‚¬ì§„) íƒ€ì´ë¨¸
  let actionTimer = null;

  function applyIdleImage() {
    if (hunger <= 15) petImg.src = HUNGRY_IMG;
    else petImg.src = currentDefault;
  }

  function setActionImage(src){
  petImg.classList.add("fade-out");

  setTimeout(()=>{
    petImg.src = src;
    petImg.classList.remove("fade-out");
  }, 200);
}
const speech = document.getElementById("speech");

function showSpeech(text, duration=800){
  speech.textContent = text;
  speech.classList.add("show");

  setTimeout(()=>{
    speech.classList.remove("show");
  }, duration);
}


  function flashImage(src, duration = 800) {
    if (actionTimer) clearTimeout(actionTimer);

    setActionImage(src);

    actionTimer = setTimeout(() => {
      applyIdleImage();  //í–‰ë™ ëë‚˜ë©´ ìƒíƒœ ë³µê·€
      actionTimer = null;
    }, duration);
  }

  function render() {
    hungerText.textContent = hunger;
    happyText.textContent = happiness;
    cleanText.textContent = cleanliness;
    energyText.textContent = energy;

    if (energy < 10) {
      playBtn.disabled = true;
      playBtn.innerHTML = "ğŸ¾<br>ì—ë„ˆì§€â†“";
    } else {
      playBtn.disabled = false;
      playBtn.innerHTML = "ğŸ¾<br>ë†€ê¸°";
    }
    // ğŸ”½ ì—ë„ˆì§€ ë¶€ì¡± ìƒíƒœ ë§í’ì„  ìœ ì§€
if (energy < 10) {
  speech.textContent = "ì¡¸ë ¤â€¦ ê±´ë“¤ë””ë§ˆ ğŸ˜´";
  speech.classList.add("show");
} else {
  // ì—ë„ˆì§€ íšŒë³µë˜ë©´ ì œê±° (í–‰ë™ ì¤‘ ì•„ë‹ ë•Œë§Œ)
  if (!actionTimer) {
    speech.classList.remove("show");
  }
}

    // âœ… ì•¡ì…˜ ì¤‘ ì•„ë‹ ë•Œ ìƒíƒœì— ë§ëŠ” ì´ë¯¸ì§€ ìœ ì§€
    if (!actionTimer) applyIdleImage();

    save();
  }

  // âœ… ì´ˆê¸° ê¸°ë³¸ ì´ë¯¸ì§€ ì„¸íŒ…
  petImg.src = currentDefault;
  applyIdleImage();

  // ğŸ– ë°¥: eat1/eat2 ëœë¤
  feedBtn.addEventListener("click", () => {
    const EATS = ["dog_eat1.jpg", "dog_eat2.jpg"];
    const randomEat = EATS[Math.floor(Math.random() * EATS.length)];
    flashImage(randomEat, 800);
    showSpeech("ëƒ ëƒ !!ğŸ˜‹", 1000);
    hunger = clamp(hunger + 15, 0, 100);
    cleanliness = clamp(cleanliness - 2, 0, 100);
    render();
  });

  // ğŸ¾ ë†€ê¸°: play1
  playBtn.addEventListener("click", () => {
    if (energy < 10) return;

    flashImage("dog_play1.jpg", 800);

    happiness = clamp(happiness + 15, 0, 100);
    energy = clamp(energy - 12, 0, 100);
    hunger = clamp(hunger - 6, 0, 100);
    cleanliness = clamp(cleanliness - 4, 0, 100);
    render();
  });

  // ğŸ› ëª©ìš•: dog_bath
  bathBtn.addEventListener("click", () => {
    flashImage("dog_bath.jpg", 800);

    cleanliness = clamp(cleanliness + 25, 0, 100);
    energy = clamp(energy - 4, 0, 100);
    happiness = clamp(happiness - 1, 0, 100);
    render();
  });

  // ğŸ˜´ ì¬ìš°ê¸°: sleep1~3 ëœë¤
  sleepBtn.addEventListener("click", () => {
    const SLEEPS = ["dog_sleep1.jpg", "dog_sleep2.jpg", "dog_sleep3.jpg"];
    const randomSleep = SLEEPS[Math.floor(Math.random() * SLEEPS.length)];
    flashImage(randomSleep, 900);

    energy = clamp(energy + 30, 0, 100);
    happiness = clamp(happiness + 5, 0, 100);
    hunger = clamp(hunger - 5, 0, 100);
    render();
  });

  // â³ ì‹œê°„ ê²½ê³¼(10ì´ˆë§ˆë‹¤)
  setInterval(() => {
    hunger = clamp(hunger - 4, 0, 100);
    energy = clamp(energy - 2, 0, 100);
    cleanliness = clamp(cleanliness - 2, 0, 100);
    happiness = clamp(happiness - 2, 0, 100);
    render();
  }, 10000);

  render();
</script>
</body>
</html>